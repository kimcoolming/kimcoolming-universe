import{e as d,f as b,g,a as v,b as t,w as x,r as w,k as l,v as i,u as h,o as f}from"./index-B01RM12k.js";import{o as y,j as k,c as _,d as C,k as V,s as A,e as u}from"./firebase-DnhTk4aq.js";const B={style:{"max-width":"700px",margin:"auto",padding:"2rem"}},D={style:{border:"1px solid #ddd","border-radius":"8px",padding:"2rem","box-shadow":"2px 2px 8px rgba(0, 0, 0, 0.05)"}},N={__name:"Write",setup(E){const m=h(),o=d(""),a=d(""),s=d(null);b(async()=>{y(u,async r=>{if(r)s.value=r;else try{await A(u,"test@test.com","123456")}catch(e){console.error("자동 로그인 실패:",e),alert("로그인 시도가 너무 많아 일시적으로 차단되었습니다. 나중에 다시 시도해주세요.")}})});const c=async()=>{if(!o.value.trim()||!a.value.trim()){alert("닉네임과 내용을 모두 입력해주세요.");return}if(!s.value){alert("로그인이 아직 완료되지 않았습니다. 잠시 후 다시 시도해주세요.");return}try{await k(_(C,"posts"),{nickname:o.value,message:a.value,userId:s.value.uid,createdAt:V()}),alert("방명록이 등록되었습니다!"),m.push("/guest-board")}catch(r){console.error("Firestore 저장 실패:",r),alert("글 작성에 실패했습니다.")}};return(r,e)=>{const p=w("router-link");return f(),g("div",B,[v(p,{to:"/guest-board"},{default:x(()=>e[2]||(e[2]=[t("button",{style:{"margin-bottom":"1.5rem"}},"← 방명록으로",-1)])),_:1}),t("div",D,[e[3]||(e[3]=t("h2",{style:{"margin-bottom":"1.5rem"}},"✍ 방명록 남기기",-1)),l(t("input",{"onUpdate:modelValue":e[0]||(e[0]=n=>o.value=n),placeholder:"닉네임",style:{width:"100%",padding:"0.75rem","margin-bottom":"1rem",border:"1px solid #ccc","border-radius":"4px"}},null,512),[[i,o.value]]),l(t("textarea",{"onUpdate:modelValue":e[1]||(e[1]=n=>a.value=n),placeholder:"내용을 입력하세요",rows:"6",style:{width:"100%",padding:"0.75rem",border:"1px solid #ccc","border-radius":"4px",resize:"vertical"}},null,512),[[i,a.value]]),t("button",{onClick:c,style:{"margin-top":"1.5rem",width:"100%",padding:"0.75rem","background-color":"#4caf50",color:"white",border:"none","border-radius":"4px","font-weight":"bold",cursor:"pointer"}}," ✅ 등록하기 ")])])}}};export{N as default};
